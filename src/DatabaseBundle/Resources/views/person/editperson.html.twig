{% extends 'DatabaseBundle:base:base.html.twig' %}

{% block title %}{{ personalData.name }} {{ personalData.surname }} {% endblock %}

{% block body %}
<h1>{{ personalData.name }} {{ personalData.surname }}</h1>

{# src/DatabaseBundle/Resources/views/Default/editperson.html.twig #}
{{ form_start(seasonForm) }}
<table>
  <td> {{ form_row(seasonForm.season) }} </td>
  <td> {{ form_row(seasonForm.save) }} </td>
</table>
{{ form_end(seasonForm) }}

{{ form_start(personalDataForm) }}
<table>
<tr>
  <th>Datos personales</th>
  {% if personalData.getIsPlayer() %}
    <th>Jugador</th>
  {% endif %}
  {% if personalData.getIsCoach() %}  
    <th>Entrenador</th>
  {% endif %}
  {% if personalData.getIsMember() %}
    <th>Socio</th>
  {% endif %}
  {% if personalData.getIsParent() %}
    <th>Padre</th>
  {%endif %}
</tr>
<tr>
  <td>
    {{ form_row(personalDataForm.name) }}
    {{ form_row(personalDataForm.surname) }}
    {{ form_row(personalDataForm.nickname) }}
    {{ form_row(personalDataForm.email) }}
    {{ form_row(personalDataForm.phone) }}
    {{ form_row(personalDataForm.dni) }}
    {{ form_row(personalDataForm.birthday) }}
    {{ form_row(personalDataForm.sex) }}
    {{ form_row(personalDataForm.isPlayer) }}
    {{ form_row(personalDataForm.isCoach) }}
    {{ form_row(personalDataForm.isParent) }}
    {{ form_row(personalDataForm.isMember) }}
  </td>
  {% if personalData.getIsPlayer() %}
    <td>
      {% for formData in personalDataForm.playerData %}
        {% if formData.vars.value.season.seasontext == curSeason %}
          {{ form_start(formData) }}
            {{ form_row(formData.payment) }}
            {{ form_row(formData.category) }} 
            {{ form_row(formData.season) }}
          {{ form_end(formData) }}
        {% else %} 
          {{ form_widget(formData, 
              { 'attr': {'style': 'display:none'} })
          }}
        {% endif %}
      {% endfor %}
    </td>
  {% endif %}
  {% if personalData.getIsCoach() %}  
    <td>
      {% for formData in personalDataForm.coachData %}
        {% if formData.vars.value.season.seasontext == curSeason %}
          {{ form_start(formData) }}
            {{ form_row(formData.salary) }}
            {{ form_row(formData.category) }} 
            {{ form_row(formData.season) }}
          {{ form_end(formData) }}
        {% else %} 
          {{ form_widget(formData, 
              { 'attr': {'style': 'display:none'} })
          }}
        {% endif %}
      {% endfor %}
    </td>
  {%endif %}
  {% if personalData.getIsMember() %}
    <td> 
      {% for formData in personalDataForm.memberData %}
        {% if formData.vars.value.season.seasontext == curSeason %}
          {{ form_start(formData) }}
            {{ form_row(formData.memberId) }}
            {{ form_row(formData.payment) }} 
            {{ form_row(formData.season) }}
          {{ form_end(formData) }}
        {% else %} 
          {{ form_widget(formData, 
              { 'attr': {'style': 'display:none'} })
          }}
        {% endif %}
      {% endfor %}
    </td>
  {% endif%}
  {% if personalData.getIsParent() %}
    <td> 
      {% for formData in personalDataForm.parentData %}
        {% if formData.vars.value.season.seasontext == curSeason %}
          {{ form_start(formData) }}
            {{ form_row(formData.season) }}
            {{ form_row(formData.playerdata) }}
          {{ form_end(formData) }}
        {% else %} 
          {{ form_widget(formData, 
              { 'attr': {'style': 'display:none'} })
          }}
        {% endif %}
      {% endfor %}
    </td>
  {% endif%}
</tr>
<tr>
  <td>
      {{ form_row(personalDataForm.save) }}
  </td>
</tr>
</table>
{{ form_end(personalDataForm) }}
{% endblock %}
